# Wordle_ES2
Wordle en castellano con diccionario RAE incluido


Voy a retomar la web para resolver el wordle. Comenzaremos por la versión en castellano. Adjunto los archivos que tenemos ahora mismo live en Github para tu referencia. Debemos partir de los mismos, y, minimizando los cambios, adaptarlos para incluir las nuevas funcionalidades que te voy a proponer debajo.

Refrescando sobre como funciona:
- La web tiene 3 modos de funcionamiento: "Resolver Wordle", "Buscar palabras" y "comparar (<100)".

- Resolver Wordle es el módulo principal, donde el usuario introduce las pistas (5 letras), indicando el color de cada letra usada. En base a esto se pueden tomar 3 acciones:
  - Se puede "Guardar intento" -> almacena en memoria esa información. 
  - Se puede "Resetear" -> borra todas las pistas guardadas y lo deja listo para empezar una nueva partida.
  - Se puede "Generar sugerencias" -> calcula un score para cada palabra del diccionario, en función de cuantas palabras, de las posibles candidatas a resolver, es previsible que descarte. Notar que hay un diccionario full con todas las entradas posibles y un "diccionario RAE", que solo contempla entradas de la RAE, descartando plurales y tiempos verbales que son menos probables que aparezcan. Se crean por tanto dos scores para cada palabra: uno para descartar candidatas full y otro para decartar candidatas RAE. Después crea 6 listas, ordenadas de mayor a menor score, con los siguientes criterios: 
    - "Candidatas a resolver full (numero de palabras que pueden ser solución)" -> solo toma aquellas palabras que pueden ser solución en función de las pistas, tomando el diccionario full con todas las entradas, y score basado en las candidatas full.
    - "Mejores para desartar full" -> se usa para descartar el mayor número de letras posibles. No tiene en cuenta palabras que tengan letras amarillas o verdes (las grises sí que las contempla, si sugiere alguna palabra con letra gris, marca con asterisco todas las letras grises que usa esa palabra. Está basado en todo el diccionario full, y el score en base a las candidatas full.
    - "Repetición verde full" ->parecido al anterior, se usa para descartar el mayor número de letras posibles, incluyendo posibles repeticiones de letras verdes, en posiciones diferentes de la que ya sabemos que es verde. Solo se rellena si hay letras verdes entre las pistas. No usa letras amarillas, y las verdes son obligatorias que aparezcan en posición diferente a la que ya se conoce por las pistas. Igual que antes, las grises están permitidas, pero si las usa, lo indica al usuario con asterisco después de cada letra gris. Está basado en el diccionario full y el score calculado en base a las candidatas full que descarta cada palabra.
    - "Candidatas a resolver RAE (numero de palabras que pueden ser solución)" -> solo toma aquellas palabras que pueden ser solución en función de las pistas, tomando el diccionario RAE con todas las entradas, y score basado en las candidatas RAE.
    - "Mejores para desartar RAE" -> se usa para descartar el mayor número de letras posibles. No tiene en cuenta palabras que tengan letras amarillas o verdes (las grises sí que las contempla, si sugiere alguna palabra con letra gris, marca con asterisco todas las letras grises que usa esa palabra. Está basado en todo el diccionario full (para tomar todas las posibles palabras, pero el score en base a las candidatas RAE.
    - "Repetición verde full" ->parecido al anterior, se usa para descartar el mayor número de letras posibles, incluyendo posibles repeticiones de letras verdes, en posiciones diferentes de la que ya sabemos que es verde. Solo se rellena si hay letras verdes entre las pistas. No usa letras amarillas, y las verdes son obligatorias que aparezcan en posición diferente a la que ya se conoce por las pistas. Igual que antes, las grises están permitidas, pero si las usa, lo indica al usuario con asterisco después de cada letra gris. Está basado en todo el diccionario full (para tomar todas las posibles palabras, pero el score en base a las candidatas RAE..  
- Por último, este modo de juego, al "Generar sugerencias", también actualiza dos tablas inferiores a las seis anteriores, donde sale cada letra del alfabeto, indicando (lista de la derecha basada en candidatas full y lista de la izquierda basada en candidatas RAE): 
    - Columna 1: el número de veces que aparece cada una entre las palabras candidatas a resolver (incluyendo repeticiones en la misma palabra)
    - Columna 2: el número de palabras en las que está presenta (solo cuenta una vez por palabra, aunque la letra esté repetida en esa palabra)
    - Columna 3: el número de veces en que la letra está repetida

- "Buscar palabras" es un módulo auxiliar, donde el usuario puede introducir hasta un máximo de 10 letras y la herramienta devuelve las combinaciones que más letras usan de ese conjunto. Usa las palabras de todo el diccionario independientemente de si son posible solución o no, o si tienen letras repetidas.

- "Comparar (<100)" es otro módulo auxiliar donde se permite al usuario comparar entre ellas, en forma matricial, hasta 25 palabras que quedan como posible solución (para que pueda entender como afectaría el uso de cada palabra en función de todas las posibles soluciones). En la tabla se da número por posición de cada letra (0 = gris, 1 = amarillo, 2 = verde) para cada palabra de cada fila (como pista) y se compara como si la palabras de cada columna fuera la solución, que código daría. Luego se agrupan por colores las palabras que por solución darían la misma combinación de 0, 1 y 2, ya que al usar la palabra pista de la fila, no seríamos capaces de distinguirlas en caso de que una de ellas fuera solución. A partir de aquí, se asocia un número a la derecha de la combinación 0, 1 y 2 (y tras un guión), que indica la posición relativa de la siguiente palabra a la derecha que tiene la misma combinación que la celda actual. Después, la penúltima columna cuenta en número de ceros que hay en las celdas de esa fila (después del guión). En el encabezado de esa última columna, se da el número más alto de esa columna. Por úlitmo, la última columna cuenta el tamaño del grupo más grande de la fila (cada grupo daría la misma combinación de colores al introducir la palabra de la fila en el wordle, si alguna palabra del grupo fuera solución). En el encabezado se pone el mínimo de ese grupo (deja las cosas más fáciles para resolver). Las palabras se ordenan de mayor a menor por el número de la penúltima columna y en caso de empate, de menor a mayor por la última columna (el siguiente criterio es alfabético ya), y las filas siguen en mismo orden. Por último se recalculan los 0, 1 y 2 (y el número detrás del guión) para las nuevas posiciones relativas y se colorean por grupos que comparten la misma secuencia de 0, 1 y 2 en cada fila. Al usuario se le permite añadir opcionalmente dos palabras a esa lista para incluirlas en la comparación (que salen en rojo en la tabla para diferenciarlas, tanto el encabezado de fila como de columna, como la fila completa). Este modo se activa incluso si hay entre 0 y 100 palabras candidatas (bien del diccionario RAE o del diccionario full), donde el usuario debería elegir 25 de las mismas para compararlas. En caso de que haya 25 o menos las palabras aparecen seleccionadas por defecto, en caso de que haya más de 25, las palabras aparecen sin seleccionar por defecto. Hay un selector que permite al usuario usar la lista RAE o la lista full para esta feature.

Con esto, el usuario es capaz de optimizar las palabras usadas para converger lo más rápidamente a la solución.

El cambio que que quiero introducir debería es el siguiente:
- Quiero introducir un nuevo botón, a la derecha de "Comparar (<=100)" que se llame "Estadísticas" y que nos lleve a una nueva pestaña donde se almacenen las estadísticas.
- En esta pestaña, deben aparecer 3 tablas (te adjunto un pantallazo de un excel con como se calcula cada tabla. he puesto una comilla (') antes de las fórmulas, para que puedas ver como se calcula cada casilla. Por favor estudialo con detenimiento para asegurarte de que lo entiendes correctamente, y en caso de duda, por favor pregúntame)
  - La primera con las estadísticas que refleja ahora la web oficial de wordle con mi cuenta
  - La segunda con las estadísticas totales (incluye partidas de antes de que se reseteara mi cuenta)
  - La tercera con las estadísticas desde que comience a usar la tool que terminamos de pulir ayer

La idea es que cada día vayamos actualizando la primera lista cuando se resetee la partida (la herramienta debe mirar cuantos intentos le ha costado y sumarle uno al contador de ese número de intentos). En caso de no haber una pista con todas verdes, se asume como fallo al guardar la sexta con algún gris/amarillo y se le suma uno a la casilla de 7. Con esta información se deben actualizar las tres tablas (ya que como puedes ver en el excel la segunda y la tercera están referenciadas a la primera). 
Debería haber un botón encima de cada tabla para resetearlas y que el usuario pueda introducir el número de intentos de cada número para esa tabla. La primera sería meter el valor bruto, la segunda y la tercera, el offset con respecto a la primera (en positivo para sumar, segunda tabla; en negativo para restar, tercera tabla). 

Las estadísticas debe guardarse localmente, y poder enviarse, mediante un botón de email a la dirección (qqcarlosqq@gmail.com)

Por favor, prepara las actualizaciones necesarias (entiendo que un script específico (stats.js) e index.html + scrypt.js será necesario cambiarlos, no sé si algún otro archivo) para que esta nueva funcionalidad quede implementada. Con los problemas que hemos experimentando en el pasado con el canvas para archivos grandes, y también para descargar archivos, creo que la mejor opción es que me pegues los códigos completos (importante que estén completos) en la conversación como en veces anteriores. Por favor, revisa a fondo tu trabajo antes de subirlo para que funcione sin errores a la primera. Asegúrate de que no hay definiciones dobles (ni de palabras ni de funciones), que no dañamos ninguna función actual  y que el código está completo (no hay errores de sintaxis, ni paréntesis,/corchetes/llaves sin cerrar...) antes de compartirlo. Revisa que los botones de buscar palabras y comparar siguen activos tras la actualización.

Por favor, antes de copiar la versión nueva del código, revisala y pruébala tú para verificar que funciona. Yo por mi lado la probaré en un navegador Chrome versión 109.0.5414.120 (Windows 7)

Muchas gracias!
